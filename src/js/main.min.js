"use strict";!function(){var e=[window.Element,window.CharacterData,window.DocumentType],t=[];e.forEach(function(e){e&&t.push(e.prototype)}),t.forEach(function(e){e.hasOwnProperty("remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}();var hospitals=[],persisted=localStorage.getItem("hospitals");persisted&&(hospitals=JSON.parse(persisted)),window.onload=function(){persisted&&0<hospitals.length&&createPersistedTable(),addButtonClickHandler(),deleteHospital()};var createId=function(){return"f".concat((~~(1e8*Math.random())).toString(16))},createItemControls=function(){var a=document.createElement("div");return a.className="table-item__controls",[{title:"Удалить",class:"delete"},{title:"Редактировать",class:"edit"}].forEach(function(e){var t=document.createElement("button");t.className=e.class,t.innerHTML=e.title,t.type="button",a.appendChild(t)}),a},createPersistedTable=function(){var e=document.querySelector(".no-data"),t=document.querySelector(".table");e.remove(),hospitals.forEach(function(a){var o=document.createElement("div"),e=createItemControls();o.className="table-item",o.appendChild(e),o.setAttribute("data-id",a.id),Object.keys(a).forEach(function(e){if("id"!==e){var t=document.createElement("div");t.innerHTML=a[e],o.appendChild(t)}}),t.appendChild(o)})},modalCloseHandler=function(){document.querySelector(".modal").classList.remove("modal_active")},modalOpenHandler=function(){var e=document.querySelector(".modal"),t=document.querySelector(".modal-close"),a=document.querySelector("form");t.onclick=function(e){e.preventDefault(),modalCloseHandler(),a.reset()},e.classList.add("modal_active")},addButtonClickHandler=function(){document.querySelector(".button-add").onclick=modalOpenHandler,addHospital()},addHospital=function(){document.querySelector(".modal-submit").onclick=function(e){var t={},a=document.querySelector("form"),o=document.querySelectorAll("input");o=Array.prototype.slice.call(o);var n=document.querySelector(".table"),l=document.querySelector(".no-data"),r=!1,c=createId();if(e.preventDefault(),o.forEach(function(e){e.value.length<1?r=!0:t[e.name]=e.value}),t.id=c,r)r=!1;else{hospitals.push(t);var i=JSON.stringify(hospitals);localStorage.setItem("hospitals",i);var d=document.createElement("div"),s=createItemControls();d.className="table-item",d.setAttribute("data-id",c),o.forEach(function(e){var t=document.createElement("div");t.innerHTML=e.value,d.appendChild(t)}),l&&l.remove(),d.appendChild(s),n.appendChild(d),a.reset(),modalCloseHandler(),deleteHospital()}}},deleteHospital=function(){document.querySelectorAll(".delete").forEach(function(e){e.onclick=function(){var e=this.closest(".table-item"),t=e.getAttribute("data-id");hospitals=hospitals.filter(function(e){return e.id!==t});var a=JSON.stringify(hospitals);localStorage.setItem("hospitals",a),e.remove(),hospitals.length<1&&renderNoData()}})},renderNoData=function(){var e=document.querySelector(".table"),t=document.createElement("div");t.className="no-data",t.innerHTML="Нет данных",e.appendChild(t)},editHospital=function(){document.querySelectorAll(".edit")};